{# This template is the basis of all templates #}
<!DOCTYPE html>
<html lang="en-US">
<head>
    {# Computed variables for HEAD section - single source of truth #}
    {%- if computedTitle %}
        {%- set computedTitleValue = computedTitle %}
    {%- elif title %}
        {%- set computedTitleValue = title %}
    {%- else %}
        {%- set computedTitleValue = 'Jon Plummer â€“ Today I Learned' %}
    {%- endif %}
    {# Truncate OG title to 95 characters if too long #}
    {%- if computedTitleValue | length > 95 %}
        {%- set ogTitleValue = computedTitleValue | truncate(92, true) %}
    {%- else %}
        {%- set ogTitleValue = computedTitleValue %}
    {%- endif %}
    {%- set isPaginatedPage = pagination and pagination.pageNumber > 0 %}
    {%- if isPaginatedPage %}
        {%- set computedDescriptionValue = "Page " + pagination.pageNumber + " of Jon Plummer's UX leadership blog. Insights on design leadership, product development, and team management." %}
        {%- set ogImageAltValue = "Page " + pagination.pageNumber + " of Jon Plummer's UX design blog" %}
    {%- else %}
        {%- if description %}
            {%- set computedDescriptionValue = description %}
        {%- else %}
            {%- set computedDescriptionValue = 'Jon Plummer is a UX design leader and mentor. Read his thoughts on design, leadership, and product development.' %}
        {%- endif %}
        {%- if description %}
            {%- set ogImageAltValue = computedTitleValue + " - " + description %}
        {%- else %}
            {%- set ogImageAltValue = computedTitleValue %}
        {%- endif %}
    {%- endif %}
    {%- if ogImage and ogImage != 'auto' %}
        {%- set ogImageUrl = ogImage %}
    {%- else %}
        {%- set ogImageUrl = '/assets/images/og/index.png' %}
    {%- endif %}
    {%- include "head/meta_basic.njk" %}
    {%- include "head/links.njk" %}
    {%- include "head/title.njk" %}
    {%- include "head/favicons.njk" %}
    {%- include "head/meta_description.njk" %}
    {%- include "head/og_tags.njk" %}
    {%- include "head/schema.njk" %}
</head>

<body>
<header>
    <a class="skip" href="#main">Skip to content</a>
    <hgroup>
        <h1><a href="/" rel="home">Jon Plummer</a></h1>
        <p>Today I Learned</p>
    </hgroup>
    {% include "components/nav.njk" %}
</header>

<main id="main" aria-label="Main content"{% if tags %} data-tags="{{ tags | join(' ') }}"{% endif %}>
    {% if tags and "page" in tags and title and page.url != "/" and not (pagination and pagination.pageNumber > 0) %}
    <h1>{{ title | smartquotes | safe }}</h1>
    {% endif %}
    {{ content | safe }}
</main>

<footer aria-label="Site footer">
    {% include "components/license.njk" %}
</footer>
</body>
</html>