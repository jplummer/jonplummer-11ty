{#-
  Open Graph Image Template
  
  This template generates HTML that is rendered into PNG images for Open Graph
  social media previews. The HTML is processed by Puppeteer in generate-og-images.js
  to create 1200x630px images.
  
  The template uses CSS custom properties from the main stylesheet (injected via
  cssCustomProperties) but overrides color variables to force light theme, ensuring
  consistent appearance across all OG images regardless of system preferences.
  
  Preview this template at: http://localhost:8080/og-image-preview/
  
  Structure:
  - body: Fixed 1200x630px container with light gray background
  - .og-content: White content area with 4rem padding
  - .og-hgroup: Author name and "Today I Learned" tagline (both in link color)
  - .og-title: Post title (matches article h1 styling)
  - .og-description: Optional post description
  - .og-date: Optional formatted post date
  
  Variables:
  - title: Post title (required)
  - description: Post description (optional)
  - date: Post date in ISO format (optional)
  - cssCustomProperties: Extracted :root CSS from main stylesheet
-#}
<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    /* CSS custom properties from main stylesheet */
    {{ cssCustomProperties | safe }}
    
    /* Force light theme for OG images - ensures consistent appearance */
    :root {
      --text-color: #2a2a2a;
      --text-color-light: #5a5a5a;
      --background-color: #d3d8d2;
      --content-background-color: #fff;
      --link-color: #d63d36; /* darkened to meet WCAG AA 4.5:1 */
      --link-hover-color: #b26205; /* darkened to meet WCAG AA 4.5:1 */
      --link-visited-color: #5b4a3b;
      --link-active-color: #0d703f;
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    /* Reset all link styles to prevent browser defaults */
    a {
      color: inherit;
      text-decoration: none;
    }
    
    /* Fixed dimensions for Open Graph image standard (1200x630px) */
    body {
      width: 1200px;
      height: 630px;
      font-family: var(--font-family);
      font-size: 1.5rem;
      line-height: var(--line-height);
      letter-spacing: var(--letter-spacing-loose);
      color: var(--text-color);
      background-color: var(--background-color); /* Light gray bars at top/bottom */
      display: flex;
      justify-content: center;
      align-items: center;
    }
    
    /* White content area with padding */
    .og-content {
      width: 100%;
      background-color: var(--content-background-color);
      padding: 4rem;
      display: flex;
      flex-direction: column;
      gap: var(--spacing-sm);
    }
    
    /* Author name and tagline grouping */
    .og-hgroup {
      display: flex;
      align-items: baseline;
      gap: var(--spacing-sm);
      flex-wrap: wrap;
    }
    
    /* Author name styling (matches site header) */
    .og-hgroup > div {
      font-size: 6rem;
      line-height: var(--line-height-3xl);
      font-weight: var(--font-weight-thin);
      letter-spacing: var(--letter-spacing-tight);
      color: var(--link-color);
    }
    
    .og-hgroup > div a {
      color: var(--link-color) !important;
      text-decoration: none;
    }
    
    /* "Today I Learned" tagline */
    .og-hgroup p {
      font-size: 1.5rem;
      line-height: var(--line-height-xs);
      font-style: italic;
      color: var(--link-color);
    }
    
    /* Post title (matches article h1 styling) */
    .og-title {
      font-size: 3.5rem;
      line-height: var(--line-height-2xl);
      font-weight: var(--font-weight-semibold);
      letter-spacing: var(--letter-spacing-tight);
      text-wrap: balance;
    }
    
    /* Post description */
    .og-description {
      font-size: 1.75rem;
      max-width: 90%;
    }
    
    /* Post date */
    .og-date {
      font-size: 1.5rem;
      font-style: italic;
    }
  </style>
</head>
<body>
  <div class="og-content">
    <div class="og-hgroup">
      <h1><a href="/">Jon Plummer</a></h1>
      <p>Today I Learned</p>
    </div>
    <h1 class="og-title">{{ title }}</h1>
    {% if description %}
    <p class="og-description">{{ description }}</p>
    {% endif %}
    {% if date %}
    <p class="og-date">{{ date | postDate }}</p>
    {% endif %}
  </div>
</body>
</html>

