---
description: Eleventy Debugging Workflow - Assume Eleventy works correctly and follow systematic debugging process
globs: []
alwaysApply: true
---

# Eleventy Debugging Workflow for AI Agents

## Core Principle: Assume Eleventy Works Correctly

When encountering unexpected behavior, **start by assuming Eleventy is working as designed**. Many "bugs" are due to misunderstanding how Eleventy's features work. This workflow helps you understand Eleventy's behavior before writing custom workarounds.

## Debugging Workflow

### Step 1: Understand What You're Seeing

Before assuming something is broken, describe the behavior:
- What did you expect to happen?
- What actually happened?
- What specific feature is involved? (collections, pagination, data cascade, dates, etc.)

### Step 2: Understand Eleventy's Behavior

**How to learn about Eleventy:**
- Use `web_search` to find the official Eleventy documentation at https://www.11ty.dev/docs/
- Search for specific features (e.g., "Eleventy collections", "Eleventy data cascade", "Eleventy date parsing")
- Check the official docs before assuming behavior is incorrect

**For each unexpected behavior, understand how Eleventy works:**

#### Collections Not Working as Expected?
- Common issues: Order, filtering, tags not working
- **Eleventy's way**: Use `tags` in frontmatter, access via `collections` object

#### Data Not Merging Correctly?
- Common issues: Data from different sources not combining as expected
- **Eleventy's way**: Data cascade merges automatically, use `override:` prefix to opt out

#### Data Files Not Loading?
- Common issues: File format not supported, file naming, file location
- **Eleventy's way**: JSON and JS work out of box, other formats need `addDataExtension()` configuration

#### Dates Off or Not Parsing?
- Common issues: Dates off by one day, timezone issues, format not recognized
- **Eleventy's way**: Eleventy parses dates automatically, handles timezones

#### Pagination Not Working?
- Common issues: Pages not generating, wrong order, missing items
- **Eleventy's way**: Use `pagination` frontmatter, Eleventy generates pages automatically

#### Filters/Shortcodes Not Working?
- Common issues: Filter not available, wrong output, async issues
- **Eleventy's way**: Register with `addFilter()` or `addShortcode()`, available in templates

#### Templates Not Rendering?
- Common issues: Template syntax errors, layout not applying, includes not found
- **Eleventy's way**: Templates process automatically, layouts chain, includes work from `_includes/`

### Step 3: Use Eleventy's Debug Tools

Before writing custom debugging code, use Eleventy's built-in debugging:

```bash
# Enable debug mode to see what Eleventy is doing
DEBUG=Eleventy* pnpm run build

# Check specific debug categories
DEBUG=Eleventy:Template* pnpm run build  # Template processing
DEBUG=Eleventy:Collection* pnpm run build  # Collections
DEBUG=Eleventy:Data* pnpm run build  # Data cascade
```

### Step 4: Check Common Pitfalls

Common gotchas:
- Dates off by one day → Timezone handling
- Collections out of order → Array `.reverse()` mutation
- Permalink issues → YAML syntax or missing trailing slash
- Data not merging → Data cascade behavior

### Step 5: Verify Expected Behavior

Before writing a workaround, verify by searching the official Eleventy documentation:
1. **Is this documented behavior?** Use `web_search` to find the relevant Eleventy docs
2. **Is there a configuration option?** Search for Eleventy configuration options for this feature
3. **Is this a known limitation?** Search for known issues or pitfalls related to this behavior
4. **Does Eleventy provide a different API for this?** Search for alternative Eleventy APIs that might solve this

Use `web_search` with queries like "Eleventy [feature name]" or "11ty [feature name]" to find official documentation.

### Step 6: Only Then Consider Custom Code

**Only write custom code if:**
- You've searched the official Eleventy documentation (using `web_search`) and verified Eleventy doesn't provide this feature natively
- You've checked the documentation thoroughly
- You understand why Eleventy behaves this way (based on official docs)
- You've confirmed with the user that custom code is needed

## Common "Unexpected" Behaviors That Are Actually Correct

### Collections Are Empty
**Expected**: Collections only include items with matching `tags` in frontmatter
Collections use tags, not file locations.

### Data From Different Sources Not Merging
**Expected**: Data cascade merges arrays/objects by default
Use `override:` prefix to replace instead of merge.

### Dates Are Off By One Day
**Expected**: Timezone handling - dates are parsed in UTC, displayed in local time
This is documented behavior, not a bug.

### Pagination Only Shows First Page
**Expected**: Pagination generates multiple files, each is a separate page
Each page is a separate template file.

### Filters Don't Work in Certain Contexts
**Expected**: Filters are template helpers, not available in all contexts
Filters work in templates, not in data files.

## Debugging Checklist

When debugging, use this checklist:

- [ ] Described the expected vs actual behavior
- [ ] Identified which Eleventy feature is involved
- [ ] Searched official Eleventy documentation (using `web_search`) to understand expected behavior
- [ ] Used Eleventy's debug mode (`DEBUG=Eleventy*`)
- [ ] Verified this isn't documented Eleventy behavior
- [ ] Confirmed with user before writing custom workarounds

## When to Ask the User

Ask the user before:
- Writing custom code to work around Eleventy behavior
- Reimplementing features Eleventy provides
- Modifying core Eleventy functionality
- Assuming Eleventy is broken

**Always explain**: "I see [behavior]. According to Eleventy documentation (https://www.11ty.dev/docs/), this is expected because [reason]. Should I [proposed solution] or is there a different approach you prefer?"

**If unsure about Eleventy's behavior**: Use `web_search` to find the official documentation before making assumptions.
